{% extends "base.html" %}
{% block content %}
<div class="container mx-auto p-4 md:p-8 max-w-5xl">
 
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-base-content">ผู้ใช้ทั้งหมด</h2>
  </div>
  <div class="overflow-x-auto bg-base-100 rounded-box shadow">
    <table class="table table-zebra w-full">
      <thead class="bg-base-200 text-base-content">
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>Roles</th>
          <th>Manage</th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
        <tr>
          <td class="font-medium">{{ u.username }}</td>
          <td>{{ u.email }}</td>
          <td>
            <div class="flex flex-wrap gap-1">
            {% for role in u.roles %}
              <span class="badge badge-primary badge-sm">{{ role }}</span>
            {% endfor %}
            </div>
          </td>
          <td>
            <a href="{{ url_for('accounts.edit_roles', user_id=u.id) }}" class="btn btn-sm btn-secondary">
            <i class="ph ph-pen lg"></i></a>
            {#{% if current_user.has_roles(['admin']) %}
            <a href="{{ url_for('accounts.edit_roles', user_id=u.id) }}" class="btn btn-sm btn-secondary">
             <i class="ph ph-pen lg"></i></a>
            {% else %}
            <a class="btn btn-sm btn-disabled" disabled><i class="ph ph-pen lg"></i></a>
            {% endif %}#}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
